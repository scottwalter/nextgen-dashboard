import{d as ue,r as g,a as le,b as N,c as ee,o as i,e as d,f as e,n as E,g as A,t as c,F as W,h as z,i as $,j as ce,k as te,l as ne,m as ve,w as f,v as ie,p as se,q as D,s as j,u as me,x as pe,y as fe,z as R,A as O}from"./index-d0e904d7.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";const re=ue("devices",()=>{const l=g({}),V=g({}),S=g(!1),w=le({});return{devices:l,miningCore:V,loading:S,errors:w,updateDeviceData:async p=>{try{w[p]=null;const C=await N.getDeviceData(p);l.value[p]||(l.value[p]={}),l.value[p]={...l.value[p],...C}}catch(C){w[p]=C.message,console.error(`Failed to update device ${p}:`,C)}},updateMiningCoreData:async()=>{try{w.miningCore=null;const p=await N.getMiningCoreData();V.value=p}catch(p){w.miningCore=p.message,console.error("Failed to update mining core data:",p)}},restartDevice:async p=>{try{return await N.restartDevice(p),{success:!0}}catch(C){return{success:!1,error:C.message}}},updateDeviceConfig:async(p,C)=>{try{return await N.updateDeviceConfig(p,C),{success:!0}}catch(v){return{success:!1,error:v.message}}},getDeviceChartData:async(p,C=24)=>{try{return await N.getDeviceChartData(p,C)}catch(v){throw console.error(`Failed to get chart data for device ${p}:`,v),v}}}});const ge={class:"device-card"},be={class:"card-header"},ye={class:"card-title"},he={class:"card-actions"},ke={class:"card-body"},$e={key:0,class:"loading"},xe={key:1,class:"error"},we={key:2,class:"device-data"},Ce={class:"category-title"},Se={key:0,class:"primary-metrics"},De={class:"metric-label"},Pe={class:"metric-value"},Te={class:"fields-grid"},_e={class:"field-content"},Me={class:"data-label"},Ve={key:0,class:"progress-container"},Fe={class:"progress-bar"},Ue={class:"last-update"},He={key:0,class:"mock-indicator"},Le={key:3,class:"no-data"},Re={__name:"DeviceCard",props:{device:{type:Object,required:!0},deviceData:{type:Object,default:null},loading:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["show-chart","show-settings"],setup(l,{emit:V}){const S=l,w=ee(()=>{var v;return(v=S.deviceData)!=null&&v.lastUpdate?C(S.deviceData.lastUpdate):new Date().toLocaleString()}),u=v=>{const a=["hashRate","expectedHashrate"];return v.filter(t=>a.includes(t.key))},r=(v,a)=>{if(a==="Mining Metrics"){const t=["hashRate","expectedHashrate"];return v.filter(F=>!t.includes(F.key))}return v},x=v=>{const a=["temp","vrTemp","fanspeed","fanrpm"],t=["temperature","percentage"];return a.includes(v.key)||t.includes(v.type)},y=v=>{const a=parseFloat(v.raw);switch(v.key){case"temp":case"vrTemp":return`${Math.min(100,Math.max(0,a/100*100))}%`;case"fanspeed":return`${Math.min(100,Math.max(0,a))}%`;case"fanrpm":return`${Math.min(100,Math.max(0,a/5e3*100))}%`;default:return"0%"}},o=v=>{const a=parseFloat(v.raw);switch(v.key){case"temp":case"vrTemp":return a>=85?"progress-critical":a>=75?"progress-warning":a>=60?"progress-good":"progress-excellent";case"fanspeed":return a>=90?"progress-critical":a>=75?"progress-warning":a>=50?"progress-good":"progress-excellent";case"fanrpm":return a>=4500?"progress-critical":a>=3500?"progress-warning":a>=2e3?"progress-good":"progress-excellent";default:return"progress-good"}},p=v=>{const a=parseFloat(v.raw);switch(v.key){case"temp":case"vrTemp":return a>=85?"text-critical":a>=75?"text-warning":a>=60?"text-good":"text-excellent";case"fanspeed":return a>=90?"text-critical":a>=75?"text-warning":"text-good";case"overheat_mode":return a>0?"text-critical":"text-excellent";default:return"text-normal"}},C=v=>v?new Date(v).toLocaleTimeString():"Never";return(v,a)=>{var t,F,n;return i(),d("div",ge,[e("div",be,[e("div",ye,[e("div",{class:E(["status-indicator",{"status-available":((t=l.deviceData)==null?void 0:t.status)==="available","status-unavailable":((F=l.deviceData)==null?void 0:F.status)==="unavailable"}])},null,2),A(" "+c(l.device.name),1)]),e("div",he,[e("button",{onClick:a[0]||(a[0]=U=>v.$emit("show-chart",l.device)),class:"action-btn",title:"Show Charts"}," 📊 "),e("button",{onClick:a[1]||(a[1]=U=>v.$emit("show-settings",l.device)),class:"action-btn",title:"Device Settings"}," ⚙️ ")])]),e("div",ke,[l.loading?(i(),d("div",$e,[...a[2]||(a[2]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading device data...",-1)])])):l.error?(i(),d("div",xe,[e("p",null,c(l.error),1),e("small",null,"Last attempt: "+c(w.value),1)])):l.deviceData&&l.deviceData.categories?(i(),d("div",we,[(i(!0),d(W,null,z(l.deviceData.categories,(U,L)=>(i(),d("div",{key:L,class:"category-section"},[e("h4",Ce,c(L),1),L==="Mining Metrics"?(i(),d("div",Se,[(i(!0),d(W,null,z(u(U),T=>(i(),d("div",{key:T.key,class:"metric-highlight"},[e("span",De,c(T.displayName),1),e("span",Pe,c(T.formatted),1)]))),128))])):$("",!0),e("div",Te,[(i(!0),d(W,null,z(r(U,L),T=>(i(),d("div",{key:T.key,class:"data-field"},[e("div",_e,[e("span",Me,c(T.displayName),1),x(T)?(i(),d("div",Ve,[e("div",Fe,[e("div",{class:E(["progress-fill",o(T)]),style:ce({width:y(T)})},null,6)]),e("span",{class:E(["data-value",p(T)])},c(T.formatted),3)])):(i(),d("span",{key:1,class:E(["data-value",p(T)])},c(T.formatted),3))])]))),128))])]))),128)),e("div",Ue,[A(" Last updated: "+c(C(l.deviceData.lastUpdate))+" ",1),(n=l.deviceData.raw)!=null&&n._mockData?(i(),d("span",He," (Mock Data) ")):$("",!0)])])):(i(),d("div",Le,[...a[3]||(a[3]=[e("p",null,"No data available",-1)])]))])])}}},Ae=q(Re,[["__scopeId","data-v-f3c0982c"]]);const Be={class:"mining-core-card"},qe={class:"card-header"},Ie={class:"card-title"},Ne={class:"card-body"},je={key:0,class:"loading"},Oe={key:1,class:"error"},Ee={key:2,class:"mining-data"},We={class:"metrics-grid"},ze={key:0,class:"data-field"},Ke={class:"data-value"},Ge={key:1,class:"data-field"},Je={class:"data-value"},Qe={key:2,class:"data-field"},Xe={class:"data-value"},Ye={key:3,class:"data-field"},Ze={class:"data-value"},et={key:4,class:"data-field"},tt={class:"data-value"},st={key:5,class:"data-field"},at={class:"data-value"},ot={key:6,class:"data-field"},lt={class:"data-value"},nt={key:7,class:"data-field"},it={class:"data-value"},rt={key:8,class:"data-field"},dt={class:"data-value"},ut={key:9,class:"data-field"},ct={class:"data-value"},vt={key:10,class:"data-field"},mt={class:"data-value"},pt={key:11,class:"data-field"},ft={class:"data-value"},gt={key:12,class:"data-field"},bt={class:"data-value"},yt={key:13,class:"data-field"},ht={class:"data-value"},kt={key:3,class:"no-data"},$t={__name:"MiningCoreCard",props:{pool:{type:Object,required:!0},loading:{type:Boolean,default:!1},error:{type:String,default:null}},setup(l){const V=u=>{if(!u)return"N/A";const r=["H/s","KH/s","MH/s","GH/s","TH/s","PH/s","EH/s"];let x=0,y=u;for(;y>=1e3&&x<r.length-1;)y/=1e3,x++;return`${y.toFixed(2)} ${r[x]}`},S=u=>{if(!u)return"N/A";const r=["","K","M","G","T","P","E"];let x=0,y=u;for(;y>=1e3&&x<r.length-1;)y/=1e3,x++;return`${y.toFixed(2)}${r[x]}`},w=u=>u?new Date(u).toLocaleString():"N/A";return(u,r)=>(i(),d("div",Be,[e("div",qe,[e("div",Ie,[e("div",{class:E(["status-indicator",{"status-available":!l.error,"status-unavailable":l.error}])},null,2),A(" Mining Core Instance: "+c(l.pool.name||"Bitcoin Pool"),1)])]),e("div",Ne,[l.loading?(i(),d("div",je,[...r[0]||(r[0]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading mining core data...",-1)])])):l.error?(i(),d("div",Oe,[e("p",null,c(l.error),1)])):l.pool?(i(),d("div",Ee,[e("div",We,[l.pool.networkHashrate?(i(),d("div",ze,[r[1]||(r[1]=e("span",{class:"data-label"},"Network Hashrate",-1)),e("span",Ke,c(V(l.pool.networkHashrate)),1)])):$("",!0),l.pool.networkDifficulty?(i(),d("div",Ge,[r[2]||(r[2]=e("span",{class:"data-label"},"Network Difficulty",-1)),e("span",Je,c(S(l.pool.networkDifficulty)),1)])):$("",!0),l.pool.lastBlockTime?(i(),d("div",Qe,[r[3]||(r[3]=e("span",{class:"data-label"},"Last Block Time",-1)),e("span",Xe,c(w(l.pool.lastBlockTime)),1)])):$("",!0),l.pool.blockHeight?(i(),d("div",Ye,[r[4]||(r[4]=e("span",{class:"data-label"},"Block Height",-1)),e("span",Ze,c(l.pool.blockHeight.toLocaleString()),1)])):$("",!0),l.pool.connectedPeers?(i(),d("div",et,[r[5]||(r[5]=e("span",{class:"data-label"},"Connected Peers",-1)),e("span",tt,c(l.pool.connectedPeers),1)])):$("",!0),l.pool.nodeVersion?(i(),d("div",st,[r[6]||(r[6]=e("span",{class:"data-label"},"Node Version",-1)),e("span",at,c(l.pool.nodeVersion),1)])):$("",!0),l.pool.connectedMiners?(i(),d("div",ot,[r[7]||(r[7]=e("span",{class:"data-label"},"Connected Miners",-1)),e("span",lt,c(l.pool.connectedMiners),1)])):$("",!0),l.pool.poolHashrate?(i(),d("div",nt,[r[8]||(r[8]=e("span",{class:"data-label"},"Pool Hashrate",-1)),e("span",it,c(V(l.pool.poolHashrate)),1)])):$("",!0),l.pool.totalPaid?(i(),d("div",rt,[r[9]||(r[9]=e("span",{class:"data-label"},"Rewards: Total Paid",-1)),e("span",dt,c(l.pool.totalPaid.toFixed(8))+" BTC",1)])):$("",!0),l.pool.totalBlocks?(i(),d("div",ut,[r[10]||(r[10]=e("span",{class:"data-label"},"Rewards: Total Blocks",-1)),e("span",ct,c(l.pool.totalBlocks),1)])):$("",!0),l.pool.totalConfirmedBlocks?(i(),d("div",vt,[r[11]||(r[11]=e("span",{class:"data-label"},"Rewards: Total Confirmed Blocks",-1)),e("span",mt,c(l.pool.totalConfirmedBlocks),1)])):$("",!0),l.pool.totalPendingBlocks?(i(),d("div",pt,[r[12]||(r[12]=e("span",{class:"data-label"},"Rewards: Total Pending Blocks",-1)),e("span",ft,c(l.pool.totalPendingBlocks),1)])):$("",!0),l.pool.lastPoolBlockTime?(i(),d("div",gt,[r[13]||(r[13]=e("span",{class:"data-label"},"Rewards: Last Pool Block Time",-1)),e("span",bt,c(w(l.pool.lastPoolBlockTime)),1)])):$("",!0),l.pool.blockReward?(i(),d("div",yt,[r[14]||(r[14]=e("span",{class:"data-label"},"Rewards: Block Reward",-1)),e("span",ht,c(l.pool.blockReward)+" BTC",1)])):$("",!0)])])):(i(),d("div",kt,[...r[15]||(r[15]=[e("p",null,"No mining core data available",-1)])]))])]))}},xt=q($t,[["__scopeId","data-v-b2126c0e"]]);const wt={class:"modal-header"},Ct={class:"modal-title"},St={class:"modal-body"},Dt={key:0,class:"loading"},Pt={key:1,class:"error"},Tt={key:2,class:"chart-container"},_t={class:"chart-info"},Mt={class:"chart-status"},Vt={class:"chart-metrics"},Ft={class:"chart-timestamp"},Ut={class:"chart-wrapper"},Ht={class:"chart-controls"},Lt={__name:"ChartModal",props:{device:{type:Object,required:!0}},emits:["close"],setup(l,{emit:V}){const S=l,w=V,u=re(),r=g(!0),x=g(""),y=g(null),o=g(null),p=g(24),C=g(25),v=g(null),a=g("Loading..."),t=g("Loading..."),F=g("Loading..."),n=g(new Date().toLocaleTimeString()),U=async()=>{r.value=!0,x.value="";try{const h=await u.getDeviceChartData(S.device.id||S.device.name,p.value);if(y.value=h,h.dataPoints&&h.dataPoints.length>0){const s=h.dataPoints[h.dataPoints.length-1],_=h.dataPoints.map(k=>k.hashrate).filter(k=>k!=null);if(a.value=`${(s.hashrate/1e3).toFixed(2)} TH/s`,F.value=`${s.asicTemp.toFixed(1)}`,_.length>0){const k=_.reduce((b,M)=>b+M,0)/_.length;t.value=`${(k/1e3).toFixed(2)} TH/s`}}L()}catch(h){x.value="Failed to load chart data",console.error("Chart data error:",h)}finally{r.value=!1}},L=()=>{if(!o.value||!y.value)return;const h=o.value,s=h.getContext("2d"),{width:_,height:k}=h,b=y.value.dataPoints||[];if(s.clearRect(0,0,_,k),b.length===0){s.fillStyle="#666",s.font="16px Arial",s.textAlign="center",s.fillText("No data available",_/2,k/2);return}const M=60,K=_-2*M,I=k-2*M,Y=b.map(m=>m.hashrate).filter(m=>m!=null),Z=b.map(m=>m.asicTemp).filter(m=>m!=null);b.map(m=>new Date(m.timestamp));const G=Math.min(...Y)*.9,ae=Math.max(...Y)*1.1,J=Math.min(...Z)*.9,oe=Math.max(...Z)*1.1;s.strokeStyle="#333",s.lineWidth=1;for(let m=0;m<=10;m++){const P=M+K*m/10;s.beginPath(),s.moveTo(P,M),s.lineTo(P,k-M),s.stroke()}for(let m=0;m<=8;m++){const P=M+I*m/8;s.beginPath(),s.moveTo(M,P),s.lineTo(_-M,P),s.stroke()}Y.length>0&&(s.strokeStyle="#ff1744",s.lineWidth=2,s.beginPath(),b.forEach((m,P)=>{if(m.hashrate==null)return;const H=M+K*P/(b.length-1),B=k-M-(m.hashrate-G)/(ae-G)*I;P===0?s.moveTo(H,B):s.lineTo(H,B)}),s.stroke()),Z.length>0&&(s.strokeStyle="#ffffff",s.lineWidth=2,s.beginPath(),b.forEach((m,P)=>{if(m.asicTemp==null)return;const H=M+K*P/(b.length-1),B=k-M-(m.asicTemp-J)/(oe-J)*I;P===0?s.moveTo(H,B):s.lineTo(H,B)}),s.stroke()),s.fillStyle="#aaa",s.font="12px Arial",s.textAlign="left",s.fillStyle="#ff1744";for(let m=0;m<=4;m++){const P=G+(ae-G)*m/4,H=k-M-I*m/4,B=P>=1e3?`${(P/1e3).toFixed(2)} TH/s`:`${P.toFixed(0)} GH/s`;s.fillText(B,5,H+3)}s.fillStyle="#ffffff",s.textAlign="right";for(let m=0;m<=4;m++){const P=J+(oe-J)*m/4,H=k-M-I*m/4;s.fillText(`${P.toFixed(1)}°C`,_-5,H+3)}s.fillStyle="#aaa",s.textAlign="center";const de=Math.max(1,Math.floor(b.length/6));for(let m=0;m<b.length;m+=de){const P=M+K*m/(b.length-1),H=new Date(b[m].timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});s.fillText(H,P,k-M+15)}},T=()=>{v.value=setInterval(()=>{U(),n.value=new Date().toLocaleTimeString()},C.value*1e3)},Q=()=>{v.value&&(clearInterval(v.value),v.value=null)},X=()=>{w("close")};return te(()=>{U(),T()}),ne(()=>{Q()}),(h,s)=>{var _;return i(),d("div",{class:"modal-overlay",onClick:X},[e("div",{class:"modal-content chart-modal",onClick:s[2]||(s[2]=se(()=>{},["stop"]))},[e("div",wt,[e("h3",Ct,c((_=l.device)==null?void 0:_.name)+" - Real-time Statistics",1),e("button",{onClick:s[0]||(s[0]=k=>h.$emit("close")),class:"modal-close"},"×")]),e("div",St,[r.value?(i(),d("div",Dt,[...s[3]||(s[3]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading chart data...",-1)])])):x.value?(i(),d("div",Pt,[e("p",null,c(x.value),1),e("button",{onClick:U,class:"btn btn-secondary"},"Retry")])):(i(),d("div",Tt,[e("div",_t,[e("div",Mt,[s[4]||(s[4]=e("span",{class:"status-badge live"},"Live",-1)),e("span",null,"Update Interval: "+c(C.value)+"s",1)]),e("div",Vt,[e("span",null,"Hashrate: "+c(a.value),1),e("span",null,"Average: "+c(t.value),1),e("span",null,"ASIC Temp: "+c(F.value)+"°C",1)]),e("div",Ft," Last update: "+c(n.value),1)]),e("div",Ut,[e("canvas",{ref_key:"chartCanvas",ref:o,width:"800",height:"400"},null,512)]),s[7]||(s[7]=ve('<div class="chart-legend" data-v-f8fb908c><div class="legend-item" data-v-f8fb908c><span class="legend-color hashrate" data-v-f8fb908c></span><span data-v-f8fb908c>Hashrate</span></div><div class="legend-item" data-v-f8fb908c><span class="legend-color temperature" data-v-f8fb908c></span><span data-v-f8fb908c>ASIC Temp</span></div></div>',1)),e("div",Ht,[s[6]||(s[6]=e("label",null,"Time Range:",-1)),f(e("select",{"onUpdate:modelValue":s[1]||(s[1]=k=>p.value=k),onChange:U},[...s[5]||(s[5]=[e("option",{value:"1"},"Last Hour",-1),e("option",{value:"6"},"Last 6 Hours",-1),e("option",{value:"12"},"Last 12 Hours",-1),e("option",{value:"24"},"Last 24 Hours",-1)])],544),[[ie,p.value]])])]))])])])}}},Rt=q(Lt,[["__scopeId","data-v-f8fb908c"]]);const At={class:"modal-header"},Bt={class:"modal-title"},qt={class:"modal-body"},It={key:0,class:"loading"},Nt={key:1,class:"error"},jt={key:2,class:"settings-form"},Ot={class:"settings-section"},Et={class:"form-group"},Wt={class:"form-group"},zt={class:"checkbox-label"},Kt={class:"form-group"},Gt={class:"form-group"},Jt={class:"settings-section"},Qt={class:"form-group"},Xt={class:"form-group"},Yt={class:"settings-section"},Zt={class:"form-group"},es={class:"settings-section"},ts={class:"form-group"},ss={class:"form-group"},as={class:"form-group"},os={class:"form-group"},ls={class:"form-group"},ns={class:"form-group"},is={class:"checkbox-label"},rs={class:"settings-section"},ds={class:"form-group"},us={class:"form-group"},cs={class:"form-group"},vs={class:"form-group"},ms={class:"form-group"},ps={class:"form-group"},fs={class:"checkbox-label"},gs={class:"settings-section"},bs={class:"form-group"},ys={class:"checkbox-label"},hs={class:"form-group"},ks={class:"form-group"},$s={class:"form-group"},xs={class:"checkbox-label"},ws={class:"form-group"},Cs=["disabled"],Ss={class:"form-group"},Ds={class:"form-group"},Ps={class:"modal-footer"},Ts=["disabled"],_s=["disabled"],Ms={__name:"DeviceSettingsModal",props:{device:{type:Object,required:!0}},emits:["close"],setup(l,{emit:V}){const S=l,w=V,u=g(!0),r=g(!1),x=g(!1),y=g(""),o=le({hostname:"bitaxe1",invertScreen:!1,screenResolution:"64x128",displayTimeout:5,wifiSSID:"MyNetwork",wifiPassword:"",asicFrequency:575,primaryPool:{url:"stratum+tcp://solo.ckpool.org",port:3333,username:"bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh.bitaxe1",password:"",difficulty:1024,extranonce:!0},fallbackPool:{url:"stratum+tcp://backup.pool.org",port:3333,username:"bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh.bitaxe1",password:"",difficulty:1024,extranonce:!0},performance:{enableOverclock:!1,frequency:575,coreVoltage:1200,autoFanSpeed:!0,manualFanSpeed:75,minFanSpeed:30,targetTemp:70}}),p=async()=>{u.value=!0,y.value="";try{console.log("Loading device config for:",S.device.name),await new Promise(a=>setTimeout(a,1e3))}catch(a){y.value="Failed to load device settings: "+a.message}finally{u.value=!1}},C=async()=>{r.value=!0;try{await new Promise(a=>setTimeout(a,1500)),console.log("Saving settings:",o),alert("Settings saved successfully!"),w("close")}catch(a){alert("Failed to save settings: "+a.message)}finally{r.value=!1}},v=async()=>{if(confirm(`Are you sure you want to restart ${S.device.name}? This will temporarily interrupt mining.`)){x.value=!0;try{await new Promise(a=>setTimeout(a,2e3)),console.log("Restarting device:",S.device.name),alert("Restart command sent successfully!"),w("close")}catch(a){alert("Failed to restart device: "+a.message)}finally{x.value=!1}}};return te(()=>{p()}),(a,t)=>{var F;return i(),d("div",{class:"modal-overlay",onClick:t[29]||(t[29]=n=>a.$emit("close"))},[e("div",{class:"modal-content settings-modal",onClick:t[28]||(t[28]=se(()=>{},["stop"]))},[e("div",At,[e("h3",Bt,"Settings for "+c((F=l.device)==null?void 0:F.name),1),e("button",{onClick:t[0]||(t[0]=n=>a.$emit("close")),class:"modal-close"},"×")]),e("div",qt,[u.value?(i(),d("div",It,[...t[30]||(t[30]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading device settings...",-1)])])):y.value?(i(),d("div",Nt,[e("p",null,c(y.value),1),e("button",{onClick:p,class:"btn btn-secondary"},"Retry")])):(i(),d("div",jt,[e("div",Ot,[t[36]||(t[36]=e("h4",null,"Device",-1)),e("div",Et,[t[31]||(t[31]=e("label",{class:"form-label"},"Hostname",-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>o.hostname=n),type:"text",class:"form-input"},null,512),[[D,o.hostname]])]),e("div",Wt,[e("label",zt,[f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>o.invertScreen=n),type:"checkbox",class:"form-checkbox"},null,512),[[j,o.invertScreen]]),t[32]||(t[32]=A(" Invert Screen ",-1))])]),e("div",Kt,[t[34]||(t[34]=e("label",{class:"form-label"},"Screen Resolution",-1)),f(e("select",{"onUpdate:modelValue":t[3]||(t[3]=n=>o.screenResolution=n),class:"form-select"},[...t[33]||(t[33]=[e("option",{value:"64x128"},"64x128",-1),e("option",{value:"64x32"},"64x32",-1),e("option",{value:"32x128"},"32x128",-1)])],512),[[ie,o.screenResolution]])]),e("div",Gt,[t[35]||(t[35]=e("label",{class:"form-label"},"Display Timeout (mins)",-1)),f(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>o.displayTimeout=n),type:"number",class:"form-input",min:"0",max:"60"},null,512),[[D,o.displayTimeout,void 0,{number:!0}]])])]),e("div",Jt,[t[39]||(t[39]=e("h4",null,"WiFi",-1)),e("div",Qt,[t[37]||(t[37]=e("label",{class:"form-label"},"SSID",-1)),f(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>o.wifiSSID=n),type:"text",class:"form-input"},null,512),[[D,o.wifiSSID]])]),e("div",Xt,[t[38]||(t[38]=e("label",{class:"form-label"},"Password",-1)),f(e("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>o.wifiPassword=n),type:"password",class:"form-input",placeholder:"Leave blank to keep current"},null,512),[[D,o.wifiPassword]])])]),e("div",Yt,[t[41]||(t[41]=e("h4",null,"Mining",-1)),e("div",Zt,[t[40]||(t[40]=e("label",{class:"form-label"},"ASIC Frequency (x)",-1)),f(e("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>o.asicFrequency=n),type:"number",class:"form-input",min:"400",max:"600",step:"25"},null,512),[[D,o.asicFrequency,void 0,{number:!0}]])])]),e("div",es,[t[48]||(t[48]=e("h4",null,"Primary Pool",-1)),e("div",ts,[t[42]||(t[42]=e("label",{class:"form-label"},"URL",-1)),f(e("input",{"onUpdate:modelValue":t[8]||(t[8]=n=>o.primaryPool.url=n),type:"text",class:"form-input",placeholder:"stratum+tcp://..."},null,512),[[D,o.primaryPool.url]])]),e("div",ss,[t[43]||(t[43]=e("label",{class:"form-label"},"Port",-1)),f(e("input",{"onUpdate:modelValue":t[9]||(t[9]=n=>o.primaryPool.port=n),type:"number",class:"form-input"},null,512),[[D,o.primaryPool.port,void 0,{number:!0}]])]),e("div",as,[t[44]||(t[44]=e("label",{class:"form-label"},"Username",-1)),f(e("input",{"onUpdate:modelValue":t[10]||(t[10]=n=>o.primaryPool.username=n),type:"text",class:"form-input"},null,512),[[D,o.primaryPool.username]])]),e("div",os,[t[45]||(t[45]=e("label",{class:"form-label"},"Password",-1)),f(e("input",{"onUpdate:modelValue":t[11]||(t[11]=n=>o.primaryPool.password=n),type:"password",class:"form-input",placeholder:"Leave blank to keep current"},null,512),[[D,o.primaryPool.password]])]),e("div",ls,[t[46]||(t[46]=e("label",{class:"form-label"},"Suggested Difficulty",-1)),f(e("input",{"onUpdate:modelValue":t[12]||(t[12]=n=>o.primaryPool.difficulty=n),type:"number",class:"form-input"},null,512),[[D,o.primaryPool.difficulty,void 0,{number:!0}]])]),e("div",ns,[e("label",is,[f(e("input",{"onUpdate:modelValue":t[13]||(t[13]=n=>o.primaryPool.extranonce=n),type:"checkbox",class:"form-checkbox"},null,512),[[j,o.primaryPool.extranonce]]),t[47]||(t[47]=A(" Extranonce Subscribe ",-1))])])]),e("div",rs,[t[55]||(t[55]=e("h4",null,"Fallback Pool",-1)),e("div",ds,[t[49]||(t[49]=e("label",{class:"form-label"},"URL",-1)),f(e("input",{"onUpdate:modelValue":t[14]||(t[14]=n=>o.fallbackPool.url=n),type:"text",class:"form-input",placeholder:"stratum+tcp://..."},null,512),[[D,o.fallbackPool.url]])]),e("div",us,[t[50]||(t[50]=e("label",{class:"form-label"},"Port",-1)),f(e("input",{"onUpdate:modelValue":t[15]||(t[15]=n=>o.fallbackPool.port=n),type:"number",class:"form-input"},null,512),[[D,o.fallbackPool.port,void 0,{number:!0}]])]),e("div",cs,[t[51]||(t[51]=e("label",{class:"form-label"},"Username",-1)),f(e("input",{"onUpdate:modelValue":t[16]||(t[16]=n=>o.fallbackPool.username=n),type:"text",class:"form-input"},null,512),[[D,o.fallbackPool.username]])]),e("div",vs,[t[52]||(t[52]=e("label",{class:"form-label"},"Password",-1)),f(e("input",{"onUpdate:modelValue":t[17]||(t[17]=n=>o.fallbackPool.password=n),type:"password",class:"form-input",placeholder:"Leave blank to keep current"},null,512),[[D,o.fallbackPool.password]])]),e("div",ms,[t[53]||(t[53]=e("label",{class:"form-label"},"Suggested Difficulty",-1)),f(e("input",{"onUpdate:modelValue":t[18]||(t[18]=n=>o.fallbackPool.difficulty=n),type:"number",class:"form-input"},null,512),[[D,o.fallbackPool.difficulty,void 0,{number:!0}]])]),e("div",ps,[e("label",fs,[f(e("input",{"onUpdate:modelValue":t[19]||(t[19]=n=>o.fallbackPool.extranonce=n),type:"checkbox",class:"form-checkbox"},null,512),[[j,o.fallbackPool.extranonce]]),t[54]||(t[54]=A(" Extranonce Subscribe ",-1))])])]),e("div",gs,[t[66]||(t[66]=e("h4",null,"Performance",-1)),e("div",bs,[e("label",ys,[f(e("input",{"onUpdate:modelValue":t[20]||(t[20]=n=>o.performance.enableOverclock=n),type:"checkbox",class:"form-checkbox"},null,512),[[j,o.performance.enableOverclock]]),t[56]||(t[56]=A(" Enable Overclock ",-1))])]),e("div",hs,[t[57]||(t[57]=e("label",{class:"form-label"},"Frequency (MHz)",-1)),f(e("input",{"onUpdate:modelValue":t[21]||(t[21]=n=>o.performance.frequency=n),type:"number",class:"form-input",min:"400",max:"650"},null,512),[[D,o.performance.frequency,void 0,{number:!0}]])]),e("div",ks,[t[58]||(t[58]=e("label",{class:"form-label"},"Core Voltage (mV)",-1)),f(e("input",{"onUpdate:modelValue":t[22]||(t[22]=n=>o.performance.coreVoltage=n),type:"number",class:"form-input",min:"1000",max:"1400"},null,512),[[D,o.performance.coreVoltage,void 0,{number:!0}]])]),e("div",$s,[e("label",xs,[f(e("input",{"onUpdate:modelValue":t[23]||(t[23]=n=>o.performance.autoFanSpeed=n),type:"checkbox",class:"form-checkbox"},null,512),[[j,o.performance.autoFanSpeed]]),t[59]||(t[59]=A(" Auto Fan Speed ",-1))])]),e("div",ws,[t[60]||(t[60]=e("label",{class:"form-label"},"Manual Fan Speed (%)",-1)),f(e("input",{"onUpdate:modelValue":t[24]||(t[24]=n=>o.performance.manualFanSpeed=n),type:"number",class:"form-input",min:"0",max:"100",disabled:o.performance.autoFanSpeed},null,8,Cs),[[D,o.performance.manualFanSpeed,void 0,{number:!0}]]),t[61]||(t[61]=e("small",{class:"form-help"},"Used if auto fan speed disabled",-1))]),e("div",Ss,[t[62]||(t[62]=e("label",{class:"form-label"},"Minimum Fan Speed (%)",-1)),f(e("input",{"onUpdate:modelValue":t[25]||(t[25]=n=>o.performance.minFanSpeed=n),type:"number",class:"form-input",min:"0",max:"100"},null,512),[[D,o.performance.minFanSpeed,void 0,{number:!0}]]),t[63]||(t[63]=e("small",{class:"form-help"},"Used if auto fan is on",-1))]),e("div",Ds,[t[64]||(t[64]=e("label",{class:"form-label"},"Target Temp (°C)",-1)),f(e("input",{"onUpdate:modelValue":t[26]||(t[26]=n=>o.performance.targetTemp=n),type:"number",class:"form-input",min:"50",max:"90"},null,512),[[D,o.performance.targetTemp,void 0,{number:!0}]]),t[65]||(t[65]=e("small",{class:"form-help"},"Used if auto fan is on",-1))])])]))]),e("div",Ps,[e("button",{onClick:t[27]||(t[27]=n=>a.$emit("close")),class:"btn btn-secondary"},"Cancel"),e("button",{onClick:C,class:"btn btn-primary",disabled:r.value},c(r.value?"Saving...":"Save Changes"),9,Ts),e("button",{onClick:v,class:"btn btn-secondary",disabled:x.value},c(x.value?"Restarting...":"Restart Device"),9,_s)])])])}}},Vs=q(Ms,[["__scopeId","data-v-31e09e10"]]);const Fs={class:"modal-header"},Us={class:"modal-body"},Hs={key:0,class:"loading"},Ls={key:1,class:"error"},Rs={key:2,class:"config-form"},As={class:"modal-footer"},Bs={__name:"AppConfigModal",emits:["close"],setup(l){const V=g(!1),S=g("");return(w,u)=>(i(),d("div",{class:"modal-overlay",onClick:u[3]||(u[3]=r=>w.$emit("close"))},[e("div",{class:"modal-content config-modal",onClick:u[2]||(u[2]=se(()=>{},["stop"]))},[e("div",Fs,[u[4]||(u[4]=e("h3",{class:"modal-title"},"Application Configuration",-1)),e("button",{onClick:u[0]||(u[0]=r=>w.$emit("close")),class:"modal-close"},"×")]),e("div",Us,[V.value?(i(),d("div",Hs,[...u[5]||(u[5]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading configuration...",-1)])])):S.value?(i(),d("div",Ls,[e("p",null,c(S.value),1)])):(i(),d("div",Rs,[...u[6]||(u[6]=[e("p",null,"Application configuration interface will be implemented here.",-1),e("p",null,"This modal will allow modification of application settings, device configurations, and mining core settings.",-1)])]))]),e("div",As,[e("button",{onClick:u[1]||(u[1]=r=>w.$emit("close")),class:"btn btn-secondary"},"Cancel"),u[7]||(u[7]=e("button",{class:"btn btn-primary"},"Save Configuration",-1))])])]))}},qs=q(Bs,[["__scopeId","data-v-fb6db7ad"]]);const Is={id:"app"},Ns={class:"header"},js={class:"header-left"},Os={class:"header-title"},Es={class:"header-version"},Ws={class:"header-right"},zs={key:0,class:"header-user"},Ks={class:"main-content"},Gs={key:0,class:"loading"},Js={key:1},Qs={key:0,class:"devices-grid"},Xs={key:1,class:"mining-core-grid"},Ys={key:2,class:"no-data"},Zs={class:"footer"},ea={class:"footer-right"},ta={__name:"HomeView",setup(l){const V=me(),S=pe(),w=fe(),u=re(),r=g(!0),x=g(new Date().toLocaleString()),y=g(null),o=g(!1),p=g(!1),C=g(!1),v=g(null),a=ee(()=>w.config),t=ee(()=>u.miningCore),F=()=>{S.logout(),V.push("/login")},n=h=>{v.value=h,o.value=!0},U=h=>{v.value=h,p.value=!0},L=()=>{C.value=!0},T=async()=>{var s,_;if(!((s=a.value)!=null&&s.devices))return;const h=a.value.devices.map(k=>u.updateDeviceData(k.id||k.name));await Promise.all(h),(_=a.value.miningCore)!=null&&_.enabled&&await u.updateMiningCoreData(),x.value=new Date().toLocaleString()},Q=()=>{var s;T();const h=((s=a.value)==null?void 0:s.refreshInterval)||25;y.value=setInterval(T,h*1e3)},X=()=>{y.value&&(clearInterval(y.value),y.value=null)};return te(async()=>{try{await w.loadConfig(),Q()}catch(h){console.error("Failed to load dashboard:",h)}finally{r.value=!1}}),ne(()=>{X()}),(h,s)=>{var _,k;return i(),d("div",Is,[e("header",Ns,[e("div",js,[e("h1",Os,c(a.value.applicationTitle||"Bitaxe Dashboard"),1),e("span",Es,c(a.value.version||"2.0.0"),1)]),e("div",Ws,[R(S).isAuthenticated?(i(),d("span",zs,c((_=R(S).user)==null?void 0:_.username),1)):$("",!0),R(S).isAuthenticated?(i(),d("button",{key:1,onClick:F,class:"logout-btn",title:"Logout"}," 🚪 ")):$("",!0)])]),e("main",Ks,[r.value?(i(),d("div",Gs,[...s[3]||(s[3]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading dashboard...",-1)])])):(i(),d("div",Js,[a.value.devices&&a.value.devices.length>0?(i(),d("div",Qs,[(i(!0),d(W,null,z(a.value.devices,b=>(i(),O(Ae,{key:b.id,device:b,"device-data":R(u).devices[b.id],loading:R(u).loading,error:R(u).errors[b.id],onShowChart:n,onShowSettings:U},null,8,["device","device-data","loading","error"]))),128))])):$("",!0),(k=a.value.miningCore)!=null&&k.enabled&&t.value?(i(),d("div",Xs,[(i(!0),d(W,null,z(t.value.pools,b=>(i(),O(xt,{key:b.name,pool:b,loading:R(u).loading,error:R(u).errors.miningCore},null,8,["pool","loading","error"]))),128))])):$("",!0),!a.value.devices||a.value.devices.length===0?(i(),d("div",Ys,[s[4]||(s[4]=e("h3",null,"No devices configured",-1)),s[5]||(s[5]=e("p",null,"Please configure your Bitaxe devices in the application settings.",-1)),e("button",{onClick:L,class:"btn btn-primary"}," Configure Devices ")])):$("",!0)]))]),e("footer",Zs,[s[6]||(s[6]=e("div",{class:"footer-left"},[e("span",null,"© 2024 Scott Walter"),e("span",null,"Author: Scott Walter")],-1)),e("div",ea,[e("span",null,"Last updated: "+c(x.value),1),e("span",null,"Version: "+c(a.value.version||"2.0.0"),1)])]),o.value?(i(),O(Rt,{key:0,device:v.value,onClose:s[0]||(s[0]=b=>o.value=!1)},null,8,["device"])):$("",!0),p.value?(i(),O(Vs,{key:1,device:v.value,onClose:s[1]||(s[1]=b=>p.value=!1)},null,8,["device"])):$("",!0),C.value?(i(),O(qs,{key:2,onClose:s[2]||(s[2]=b=>C.value=!1)})):$("",!0)])}}},oa=q(ta,[["__scopeId","data-v-4f51c944"]]);export{oa as default};
